{"version":3,"sources":["@wordpress/e2e-test-utils/src/observe-focus-loss.js"],"names":["enableFocusLossObservation","page","evaluate","window","_detectFocusLoss","document","body","removeEventListener","event","relatedTarget","Error","addEventListener","disableFocusLossObservation"],"mappings":";;;AAAA;AACA;AACA;AACA;AACA,gBAAsBA,0BAAtB;AAAA;AAAA;AAmBA;AACA;AACA;;;yFArBO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACAC,IAAI,CAACC,QAAL,CAAe,YAAM;AAC1B,kBAAKC,MAAM,CAACC,gBAAZ,EAA+B;AAC9BC,gBAAAA,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CACC,UADD,EAECJ,MAAM,CAACC,gBAFR;AAIA;;AAEDD,cAAAA,MAAM,CAACC,gBAAP,GAA0B,UAAEI,KAAF,EAAa;AACtC,oBAAK,CAAEA,KAAK,CAACC,aAAb,EAA6B;AAC5B,wBAAM,IAAIC,KAAJ,CAAW,uBAAX,CAAN;AACA;AACD,eAJD;;AAMAL,cAAAA,QAAQ,CAACC,IAAT,CAAcK,gBAAd,CAAgC,UAAhC,EAA4CR,MAAM,CAACC,gBAAnD;AACA,aAfK,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAsBP,gBAAsBQ,2BAAtB;AAAA;AAAA;;;0FAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACAX,IAAI,CAACC,QAAL,CAAe,YAAM;AAC1B,kBAAKC,MAAM,CAACC,gBAAZ,EAA+B;AAC9BC,gBAAAA,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CACC,UADD,EAECJ,MAAM,CAACC,gBAFR;AAIA;AACD,aAPK,CADA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Adds an event listener to the document which throws an error if there is a\n * loss of focus.\n */\nexport async function enableFocusLossObservation() {\n\tawait page.evaluate( () => {\n\t\tif ( window._detectFocusLoss ) {\n\t\t\tdocument.body.removeEventListener(\n\t\t\t\t'focusout',\n\t\t\t\twindow._detectFocusLoss\n\t\t\t);\n\t\t}\n\n\t\twindow._detectFocusLoss = ( event ) => {\n\t\t\tif ( ! event.relatedTarget ) {\n\t\t\t\tthrow new Error( 'Unexpected focus loss' );\n\t\t\t}\n\t\t};\n\n\t\tdocument.body.addEventListener( 'focusout', window._detectFocusLoss );\n\t} );\n}\n\n/**\n * Removes the focus loss listener that `enableFocusLossObservation()` adds.\n */\nexport async function disableFocusLossObservation() {\n\tawait page.evaluate( () => {\n\t\tif ( window._detectFocusLoss ) {\n\t\t\tdocument.body.removeEventListener(\n\t\t\t\t'focusout',\n\t\t\t\twindow._detectFocusLoss\n\t\t\t);\n\t\t}\n\t} );\n}\n"]}