{"version":3,"sources":["@wordpress/e2e-test-utils/src/transform-block-to.js"],"names":["showBlockToolbar","transformBlockTo","name","page","waitForSelector","switcherToggle","evaluate","element","scrollIntoView","visible","click","xpath","waitForXPath","insertButton","BLOCK_SELECTOR","BLOCK_NAME_SELECTOR"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,gBAAT,QAAiC,sBAAjC;AAEA;AACA;AACA;AACA;AACA;;AACA,gBAAsBC,gBAAtB;AAAA;AAAA;;;+EAAO,iBAAiCC,IAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACAF,gBAAgB,EADhB;;AAAA;AAAA;AAAA,mBAGuBG,IAAI,CAACC,eAAL,CAC5B,sCAD4B,CAHvB;;AAAA;AAGAC,YAAAA,cAHA;AAAA;AAAA,mBAMAA,cAAc,CAACC,QAAf,CAAyB,UAAEC,OAAF;AAAA,qBAAeA,OAAO,CAACC,cAAR,EAAf;AAAA,aAAzB,CANA;;AAAA;AAAA;AAAA,mBAOAL,IAAI,CAACC,eAAL,CAAsB,sCAAtB,EAA8D;AACnEK,cAAAA,OAAO,EAAE;AAD0D,aAA9D,CAPA;;AAAA;AAAA;AAAA,mBAUAJ,cAAc,CAACK,KAAf,EAVA;;AAAA;AAAA;AAAA,mBAWAP,IAAI,CAACC,eAAL,CAAsB,yCAAtB,EAAiE;AACtEK,cAAAA,OAAO,EAAE;AAD6D,aAAjE,CAXA;;AAAA;AAeN;AACME,YAAAA,KAhBA,wFAgBqFT,IAhBrF;AAAA;AAAA,mBAiBqBC,IAAI,CAACS,YAAL,CAAmBD,KAAnB,EAA0B;AAAEF,cAAAA,OAAO,EAAE;AAAX,aAA1B,CAjBrB;;AAAA;AAiBAI,YAAAA,YAjBA;AAAA;AAAA,mBAmBAA,YAAY,CAACP,QAAb,CAAuB,UAAEC,OAAF;AAAA,qBAAeA,OAAO,CAACC,cAAR,EAAf;AAAA,aAAvB,CAnBA;;AAAA;AAAA;AAAA,mBAoBAK,YAAY,CAACH,KAAb,EApBA;;AAAA;AAsBN;AACMI,YAAAA,cAvBA,GAuBiB,iCAvBjB;AAwBAC,YAAAA,mBAxBA,2BAwBuCb,IAxBvC;AAAA;AAAA,mBAyBAC,IAAI,CAACC,eAAL,WAA0BU,cAA1B,SAA6CC,mBAA7C,EAzBA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Internal dependencies\n */\nimport { showBlockToolbar } from './show-block-toolbar';\n\n/**\n * Converts editor's block type.\n *\n * @param {string} name Block name.\n */\nexport async function transformBlockTo( name ) {\n\tawait showBlockToolbar();\n\n\tconst switcherToggle = await page.waitForSelector(\n\t\t'.block-editor-block-switcher__toggle'\n\t);\n\tawait switcherToggle.evaluate( ( element ) => element.scrollIntoView() );\n\tawait page.waitForSelector( '.block-editor-block-switcher__toggle', {\n\t\tvisible: true,\n\t} );\n\tawait switcherToggle.click();\n\tawait page.waitForSelector( '.block-editor-block-switcher__container', {\n\t\tvisible: true,\n\t} );\n\n\t// Find the block button option within the switcher popover.\n\tconst xpath = `//*[contains(@class, \"block-editor-block-switcher__popover\")]//button[.='${ name }']`;\n\tconst insertButton = await page.waitForXPath( xpath, { visible: true } );\n\t// Clicks may fail if the button is out of view. Assure it is before click.\n\tawait insertButton.evaluate( ( element ) => element.scrollIntoView() );\n\tawait insertButton.click();\n\n\t// Wait for the transformed block to appear.\n\tconst BLOCK_SELECTOR = '.block-editor-block-list__block';\n\tconst BLOCK_NAME_SELECTOR = `[data-title=\"${ name }\"]`;\n\tawait page.waitForSelector( `${ BLOCK_SELECTOR }${ BLOCK_NAME_SELECTOR }` );\n}\n"]}