{"version":3,"sources":["@wordpress/e2e-test-utils/src/uninstall-plugin.js"],"names":["switchUserToAdmin","switchUserToTest","visitAdminPage","uninstallPlugin","slug","confirmPromise","Promise","resolve","page","once","all","click","waitForSelector"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,iBAAT,QAAkC,wBAAlC;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,SAASC,cAAT,QAA+B,oBAA/B;AAEA;AACA;AACA;AACA;AACA;;AACA,gBAAsBC,eAAtB;AAAA;AAAA;;;8EAAO,iBAAgCC,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACAJ,iBAAiB,EADjB;;AAAA;AAAA;AAAA,mBAEAE,cAAc,CAAE,aAAF,CAFd;;AAAA;AAGAG,YAAAA,cAHA,GAGiB,IAAIC,OAAJ,CAAa,UAAEC,OAAF,EAAe;AAClDC,cAAAA,IAAI,CAACC,IAAL,CAAW,QAAX,EAAqB;AAAA,uBAAMF,OAAO,EAAb;AAAA,eAArB;AACA,aAFsB,CAHjB;AAAA;AAAA,mBAMAD,OAAO,CAACI,GAAR,CAAa,CAClBL,cADkB,EAElBG,IAAI,CAACG,KAAL,0BAA8BP,IAA9B,mBAFkB,CAAb,CANA;;AAAA;AAAA;AAAA,mBAUAI,IAAI,CAACI,eAAL,0BAAwCR,IAAxC,iBAVA;;AAAA;AAAA;AAAA,mBAWAH,gBAAgB,EAXhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Internal dependencies\n */\nimport { switchUserToAdmin } from './switch-user-to-admin';\nimport { switchUserToTest } from './switch-user-to-test';\nimport { visitAdminPage } from './visit-admin-page';\n\n/**\n * Uninstalls a plugin.\n *\n * @param {string} slug Plugin slug.\n */\nexport async function uninstallPlugin( slug ) {\n\tawait switchUserToAdmin();\n\tawait visitAdminPage( 'plugins.php' );\n\tconst confirmPromise = new Promise( ( resolve ) => {\n\t\tpage.once( 'dialog', () => resolve() );\n\t} );\n\tawait Promise.all( [\n\t\tconfirmPromise,\n\t\tpage.click( `tr[data-slug=\"${ slug }\"] .delete a` ),\n\t] );\n\tawait page.waitForSelector( `tr[data-slug=\"${ slug }\"].deleted` );\n\tawait switchUserToTest();\n}\n"]}