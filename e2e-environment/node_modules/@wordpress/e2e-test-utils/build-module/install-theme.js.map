{"version":3,"sources":["@wordpress/e2e-test-utils/src/install-theme.js"],"names":["switchUserToAdmin","switchUserToTest","visitAdminPage","isThemeInstalled","installTheme","slug","searchTerm","installed","encodeURIComponent","page","waitForSelector","$","activateLink","click"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,iBAAT,QAAkC,wBAAlC;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAsBC,YAAtB;AAAA;AAAA;;;2EAAO,iBAA6BC,IAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2EAAoD,EAApD,EAAqCC,UAArC,QAAqCA,UAArC;AAAA;AAAA,mBACAN,iBAAiB,EADjB;;AAAA;AAAA;AAAA,mBAGkBG,gBAAgB,CAAEE,IAAF,CAHlC;;AAAA;AAGAE,YAAAA,SAHA;;AAAA,iBAIDA,SAJC;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAQAL,cAAc,CACnB,mBADmB,mBAERM,kBAAkB,CAAEF,UAAU,IAAID,IAAhB,CAFV,EARd;;AAAA;AAAA;AAAA,mBAYAI,IAAI,CAACC,eAAL,2BAAyCL,IAAzC,SAZA;;AAAA;AAAA;AAAA,mBAcqBI,IAAI,CAACE,CAAL,2BACPN,IADO,0BAdrB;;AAAA;AAcAO,YAAAA,YAdA;;AAAA,iBAiBDA,YAjBC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAkBCX,gBAAgB,EAlBjB;;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAsBAQ,IAAI,CAACC,eAAL,sCAAoDL,IAApD,SAtBA;;AAAA;AAAA;AAAA,mBAuBAI,IAAI,CAACI,KAAL,sCAA0CR,IAA1C,SAvBA;;AAAA;AAAA;AAAA,mBAwBAI,IAAI,CAACC,eAAL,8BAA4CL,IAA5C,mBAxBA;;AAAA;AAAA;AAAA,mBAyBAJ,gBAAgB,EAzBhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Internal dependencies\n */\nimport { switchUserToAdmin } from './switch-user-to-admin';\nimport { switchUserToTest } from './switch-user-to-test';\nimport { visitAdminPage } from './visit-admin-page';\nimport { isThemeInstalled } from './theme-installed';\n\n/**\n * Installs a theme from the WP.org repository.\n *\n * @param {string} slug Theme slug.\n * @param {Object?} settings Optional settings object.\n * @param {string?} settings.searchTerm Search term to use if the theme is not findable by its slug.\n */\nexport async function installTheme( slug, { searchTerm } = {} ) {\n\tawait switchUserToAdmin();\n\n\tconst installed = await isThemeInstalled( slug );\n\tif ( installed ) {\n\t\treturn;\n\t}\n\n\tawait visitAdminPage(\n\t\t'theme-install.php',\n\t\t`search=${ encodeURIComponent( searchTerm || slug ) }`\n\t);\n\tawait page.waitForSelector( `div[data-slug=\"${ slug }\"]` );\n\n\tconst activateLink = await page.$(\n\t\t`div[data-slug=\"${ slug }\"] .button.activate`\n\t);\n\tif ( activateLink ) {\n\t\tawait switchUserToTest();\n\t\treturn;\n\t}\n\n\tawait page.waitForSelector( `.theme-install[data-slug=\"${ slug }\"]` );\n\tawait page.click( `.theme-install[data-slug=\"${ slug }\"]` );\n\tawait page.waitForSelector( `.theme[data-slug=\"${ slug }\"] .activate` );\n\tawait switchUserToTest();\n}\n"]}