{"version":3,"sources":["@wordpress/e2e-test-utils/src/posts.js"],"names":["addQueryArgs","switchUserToAdmin","switchUserToTest","visitAdminPage","trashAllPosts","postType","postStatus","query","post_type","post_status","slice","page","$","bulkSelector","waitForSelector","click","select","waitForXPath"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,YAAT,QAA6B,gBAA7B;AAEA;AACA;AACA;;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,SAASC,cAAT,QAA+B,oBAA/B;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAsBC,aAAtB;AAAA;AAAA;;;4EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8BC,YAAAA,QAA9B,2DAAyC,MAAzC;AAAiDC,YAAAA,UAAjD;AAAA;AAAA,mBACAL,iBAAiB,EADjB;;AAAA;AAEN;AACMM,YAAAA,KAHA,GAGQP,YAAY,CAAE,EAAF,EAAM;AAC/BQ,cAAAA,SAAS,EAAEH,QADoB;AAE/BI,cAAAA,WAAW,EAAEH;AAFkB,aAAN,CAAZ,CAGVI,KAHU,CAGH,CAHG,CAHR;AAAA;AAAA,mBAOAP,cAAc,CAAE,UAAF,EAAcI,KAAd,CAPd;;AAAA;AAAA;AAAA,mBAUqBI,IAAI,CAACC,CAAL,CAAQ,2BAAR,CAVrB;;AAAA;AAUAC,YAAAA,YAVA;;AAAA,gBAWCA,YAXD;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mBAgBAF,IAAI,CAACG,eAAL,CAAsB,sBAAtB,CAhBA;;AAAA;AAAA;AAAA,mBAiBAH,IAAI,CAACI,KAAL,CAAY,sBAAZ,CAjBA;;AAAA;AAAA;AAAA,mBAmBAJ,IAAI,CAACK,MAAL,CAAa,2BAAb,EAA0C,OAA1C,CAnBA;;AAAA;AAAA;AAAA,mBAqBAL,IAAI,CAACI,KAAL,CAAY,WAAZ,CArBA;;AAAA;AAAA;AAAA,mBAsBAJ,IAAI,CAACM,YAAL,CACL,oFADK,CAtBA;;AAAA;AAAA;AAAA,mBAyBAf,gBAAgB,EAzBhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies\n */\nimport { switchUserToAdmin } from './switch-user-to-admin';\nimport { switchUserToTest } from './switch-user-to-test';\nimport { visitAdminPage } from './visit-admin-page';\n\n/**\n * Navigates to the post listing screen and bulk-trashes any posts which exist.\n *\n * @param {string} postType - String slug for type of post to trash.\n * @param {string} postStatus - String status of posts to trash.\n *\n * @return {Promise} Promise resolving once posts have been trashed.\n */\nexport async function trashAllPosts( postType = 'post', postStatus ) {\n\tawait switchUserToAdmin();\n\t// Visit `/wp-admin/edit.php` so we can see a list of posts and delete them.\n\tconst query = addQueryArgs( '', {\n\t\tpost_type: postType,\n\t\tpost_status: postStatus,\n\t} ).slice( 1 );\n\tawait visitAdminPage( 'edit.php', query );\n\n\t// If this selector doesn't exist there are no posts for us to delete.\n\tconst bulkSelector = await page.$( '#bulk-action-selector-top' );\n\tif ( ! bulkSelector ) {\n\t\treturn;\n\t}\n\n\t// Select all posts.\n\tawait page.waitForSelector( '[id^=cb-select-all-]' );\n\tawait page.click( '[id^=cb-select-all-]' );\n\t// Select the \"bulk actions\" > \"trash\" option.\n\tawait page.select( '#bulk-action-selector-top', 'trash' );\n\t// Submit the form to send all draft/scheduled/published posts to the trash.\n\tawait page.click( '#doaction' );\n\tawait page.waitForXPath(\n\t\t'//*[contains(@class, \"updated notice\")]/p[contains(text(), \"moved to the Trash.\")]'\n\t);\n\tawait switchUserToTest();\n}\n"]}