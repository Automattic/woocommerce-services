{"version":3,"sources":["@wordpress/e2e-test-utils/src/delete-theme.js"],"names":["activateTheme","installTheme","switchUserToAdmin","switchUserToTest","visitAdminPage","isThemeInstalled","deleteTheme","slug","newThemeSlug","newThemeSearchTerm","page","click","waitForSelector","waitFor","themeSlug","document","querySelector"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,aAAT,QAA8B,kBAA9B;AACA,SAASC,YAAT,QAA6B,iBAA7B;AACA,SAASC,iBAAT,QAAkC,wBAAlC;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,SAASC,cAAT,QAA+B,oBAA/B;AACA,SAASC,gBAAT,QAAiC,mBAAjC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAsBC,WAAtB;AAAA;AAAA;;;0EAAO,iBACNC,IADM;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,2EAEiC,EAFjC,EAEJC,YAFI,QAEJA,YAFI,EAEUC,kBAFV,QAEUA,kBAFV;AAAA;AAAA,mBAIAP,iBAAiB,EAJjB;;AAAA;AAAA,iBAMDM,YANC;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAOCP,YAAY,CAAEO,YAAF,EAAgBC,kBAAhB,CAPb;;AAAA;AAAA;AAAA,mBAQCT,aAAa,CAAEQ,YAAF,CARd;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAUCJ,cAAc,CAAE,YAAF,CAVf;;AAAA;AAAA;AAAA,mBAaSC,gBAAgB,CAAEE,IAAF,CAbzB;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAcCJ,gBAAgB,EAdjB;;AAAA;AAAA;;AAAA;AAAA;AAAA,mBAkBAO,IAAI,CAACC,KAAL,wBAA4BJ,IAA5B,SAlBA;;AAAA;AAAA;AAAA,mBAmBAG,IAAI,CAACE,eAAL,CAAsB,8BAAtB,CAnBA;;AAAA;AAAA;AAAA,mBAoBAF,IAAI,CAACC,KAAL,CAAY,8BAAZ,CApBA;;AAAA;AAAA;AAAA,mBAqBAD,IAAI,CAACE,eAAL,CAAsB,uBAAtB,CArBA;;AAAA;AAAA;AAAA,mBAyBAF,IAAI,CAACG,OAAL,CACL,UAAEC,SAAF;AAAA,qBACC,CAAEC,QAAQ,CAACC,aAAT,wBAAwCF,SAAxC,SADH;AAAA,aADK,EAGLP,IAHK,CAzBA;;AAAA;AAAA;AAAA,mBA+BAJ,gBAAgB,EA/BhB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Internal dependencies\n */\nimport { activateTheme } from './activate-theme';\nimport { installTheme } from './install-theme';\nimport { switchUserToAdmin } from './switch-user-to-admin';\nimport { switchUserToTest } from './switch-user-to-test';\nimport { visitAdminPage } from './visit-admin-page';\nimport { isThemeInstalled } from './theme-installed';\n\n/**\n * Deletes a theme from the site, activating another theme if necessary.\n *\n * @param {string} slug Theme slug.\n * @param {Object?} settings Optional settings object.\n * @param {string?} settings.newThemeSlug A theme to switch to if the theme to delete is active. Required if the theme to delete is active.\n * @param {string?} settings.newThemeSearchTerm A search term to use if the new theme is not findable by its slug.\n */\nexport async function deleteTheme(\n\tslug,\n\t{ newThemeSlug, newThemeSearchTerm } = {}\n) {\n\tawait switchUserToAdmin();\n\n\tif ( newThemeSlug ) {\n\t\tawait installTheme( newThemeSlug, newThemeSearchTerm );\n\t\tawait activateTheme( newThemeSlug );\n\t} else {\n\t\tawait visitAdminPage( 'themes.php' );\n\t}\n\n\tif ( ! ( await isThemeInstalled( slug ) ) ) {\n\t\tawait switchUserToTest();\n\t\treturn;\n\t}\n\n\tawait page.click( `[data-slug=\"${ slug }\"]` );\n\tawait page.waitForSelector( '.theme-actions .delete-theme' );\n\tawait page.click( '.theme-actions .delete-theme' );\n\tawait page.waitForSelector( 'body:not(.modal-open)' );\n\n\t// Wait for the theme to be removed from the page.\n\t// eslint-disable-next-line no-restricted-syntax\n\tawait page.waitFor(\n\t\t( themeSlug ) =>\n\t\t\t! document.querySelector( `[data-slug=\"${ themeSlug }\"]` ),\n\t\tslug\n\t);\n\n\tawait switchUserToTest();\n}\n"]}