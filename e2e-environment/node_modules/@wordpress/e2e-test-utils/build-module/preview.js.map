{"version":3,"sources":["@wordpress/e2e-test-utils/src/preview.js"],"names":["last","openPreviewPage","editorPage","page","browser","pages","openTabs","expectedTabsCount","length","click","waitFor","previewPage"],"mappings":";;;AAAA;AACA;AACA;AACA,SAASA,IAAT,QAAqB,QAArB;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,gBAAsBC,eAAtB;AAAA;AAAA;;;8EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgCC,YAAAA,UAAhC,2DAA6CC,IAA7C;AAAA;AAAA,mBACeC,OAAO,CAACC,KAAR,EADf;;AAAA;AACFC,YAAAA,QADE;AAEAC,YAAAA,iBAFA,GAEoBD,QAAQ,CAACE,MAAT,GAAkB,CAFtC;AAAA;AAAA,mBAGAN,UAAU,CAACO,KAAX,CAAkB,2CAAlB,CAHA;;AAAA;AAAA;AAAA,mBAIAP,UAAU,CAACQ,OAAX,CAAoB,4CAApB,CAJA;;AAAA;AAAA;AAAA,mBAKAR,UAAU,CAACO,KAAX,CAAkB,4CAAlB,CALA;;AAAA;AAAA,kBAQEH,QAAQ,CAACE,MAAT,GAAkBD,iBARpB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBASCL,UAAU,CAACQ,OAAX,CAAoB,CAApB,CATD;;AAAA;AAAA;AAAA,mBAUYN,OAAO,CAACC,KAAR,EAVZ;;AAAA;AAULC,YAAAA,QAVK;AAAA;AAAA;;AAAA;AAaAK,YAAAA,WAbA,GAacX,IAAI,CAAEM,QAAF,CAblB;AAAA,6CAcCK,WAdD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * External dependencies\n */\nimport { last } from 'lodash';\n\n/** @typedef {import('puppeteer').Page} Page */\n\n/**\n * Opens the preview page of an edited post.\n *\n * @param {Page} editorPage puppeteer editor page.\n * @return {Page} preview page.\n */\nexport async function openPreviewPage( editorPage = page ) {\n\tlet openTabs = await browser.pages();\n\tconst expectedTabsCount = openTabs.length + 1;\n\tawait editorPage.click( '.block-editor-post-preview__button-toggle' );\n\tawait editorPage.waitFor( '.edit-post-header-preview__button-external' );\n\tawait editorPage.click( '.edit-post-header-preview__button-external' );\n\n\t// Wait for the new tab to open.\n\twhile ( openTabs.length < expectedTabsCount ) {\n\t\tawait editorPage.waitFor( 1 );\n\t\topenTabs = await browser.pages();\n\t}\n\n\tconst previewPage = last( openTabs );\n\treturn previewPage;\n}\n"]}